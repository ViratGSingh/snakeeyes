{% extends 'layouts/base.html' %}
{% block title %}Snake Eyes{% endblock %}

  

{% block body %}
<nav class="navbar navbar-default navbar-fixed-top" style="background-color:white;">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed"
              data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="{{ url_for('page.start') }}">
        <img src="{{ url_for('static', filename='images/snake-eyes.jpg') }}"
             class="img-responsive"
             width="229" height="50" title="Snake Eyes" alt="Snake Eyes"/>
      </a>
    </div>
    
    <!-- <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
          <li><a href="{{ url_for('page.start') }}">Home</a></li>
          <li><a href="{{ url_for('page.find') }}">Search</a></li>
          {% if not current_user.is_authenticated %}
          <li><a href="{{ url_for('user.signup') }}">Sign Up</a></li>
          {% endif %}
          
      </ul> 
      <style>
        /* Change color of dropdown links on hover */
        .dropdown-content a:hover {background-color: #ddd;}

        /* Show the dropdown menu on hover */
        .dropdown:hover .dropdown-content {display: block;}

        
      </style>
      <ul class="nav navbar-nav navbar-right">
          <div class="dropdown" >
            {% if current_user.username %}
            <button class="dropbtn">{{current_user.username}} <i class="fa fa-caret-down"></i></button>
            {% elif current_user.is_authenticated %}
            <button class="dropbtn">Account<i class="fa fa-caret-down"></i></button>
            {% else %}
            <button class="dropbtn" >Account <i class="fa fa-caret-down"></i></button>
            {% endif %}
            <div class="dropdown-content">
              
              {% if current_user.is_authenticated %}
              <a href="{{ url_for('user.settings') }}">Settings</a>
              <a href="{{ url_for('user.logout') }}">Log out</a>
              {% else %}
              <a href="{{ url_for('user.login') }}">Log in</a>
              {% endif %}
            </div>
          </div> 
        </ul>
       
      </ul>
    </div> -->
    
  </div>
</nav>
  
<div class="single-product-area">
  
  <!-- Page Content -->
  <div class="container" style="padding: 15px;">
    <form action="/search">
        <div class="input-group" style="padding: 5px;">
          
          <!-- <select name="category" style="height: 35px; float: left; ">
            {% for category in categories %} 
              <option> {{category}} </option>
            {% endfor %}  
          </select>   -->
          
          <input type='text' id='games' name="game"  autocomplete="off" placeholder="Copy Pasta the name here... " style=" width: 500px; height:36px ">
          <label for="games" ></label>
          
            
          
            
          
          
            
          <span class="input-group-btn" style="width:40px;">
            <button id="search-this" type="submit" class="pull-right btn btn-default search-btn">
                <i class="fa fa-search"></i>
            </button>
          </span>
          
        </div> 
    </form>
    
    
    <script>
          $(document).ready(function () {
        $("#games").autocomplete(
          
        {
            source: async function(request, response) {
                let data = await fetch(`https://snake-eyes.herokuapp.com/autocomplete?query=${request.term}`)
                    .then(results => results.json())
                    .then(results => results.map(result => {
                        return { label: result, value: result };
                    }));
                response(data);
            },
            minLength: 2,
            select: function(event, ui, response) {
                
                    
                window.open(`https://snake-eyes.herokuapp.com/search?game=${ui.item.value}`, "_self");
                    
            }
        });
    });
            
            
                    
        
    
    </script>

    
          {% for game in games %}
            
                <div class="row" style="padding: 15px;">
                
                    <div class="card-body">
                      <img src="{{ game[5] }}" width="300" height="200" style="padding: 5px; float: left;"/>
                    </div>
                    <h3 class="card-title" id="game" >{{ game[1] }}</h3>
                   
                    
                    <span>
                      <span style="font-size: large;">Developer: </span>
                      <span style="font-size: larger;">{{game[2] }}</span> 
                    </span>
                    <br>
                    
                    <span>
                      <span style="font-size: large;">Date: </span>
                      <span style="font-size: larger;">{{game[3] }}</span> 
                    </span>
                    <br>
                    <span>
                      <span style="font-size: large;">Top Tags: </span>
                      <span style="font-size: larger;">{{game[4] }}</span> 
                    </span>
                    <br>
                    <span>
                      <span style="font-size: large;">Rating: </span>
                      <span style="font-size: larger;">{{game[8] }}</span> 
                    </span>
                    <br>
                    
                    <form action="/game">
                      <button type="submit" name="recommend" value="{{ game[1] }}">More Like This</button>
                      <button style="float: inline-end;" type="submit" name="details" value="{{ game[1] }}">More Details</button>
                        
                      
                      
                    </form> 
                </div>
                    
                 
            
          {% endfor %}
              
              
  
            
      

  
   
    </div>
  <!-- /.container -->

  



          
          
         
  </div> 
</div>  
{% endblock %}