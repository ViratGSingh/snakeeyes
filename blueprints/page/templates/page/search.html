{% extends 'layouts/base.html' %}
{% block title %}Snake Eyes{% endblock %}

  

{% block body %}
  
<div class="single-product-area">
  
  <!-- Page Content -->
  <div class="container" style="padding: 15px;">
    <form action="/search">
        <div class="input-group" style="padding: 5px;">
          
          <!-- <select name="category" style="height: 35px; float: left; ">
            {% for category in categories %} 
              <option> {{category}} </option>
            {% endfor %}  
          </select>   -->
          
          <input type='text' id='games' name="game"  autocomplete="off" placeholder="Copy Pasta the name here... " style=" width: 500px; height:36px ">
          
          
            
          
            
          
          
            
          <span class="input-group-btn" style="width:40px;">
            <button id="search-this" type="submit" class="pull-right btn btn-default search-btn">
                <i class="fa fa-search"></i>
            </button>
          </span>
          
        </div> 
    </form>
    <script>
          $(document).ready(function () {
        $("#games").autocomplete(
          
        {
            source: async function(request, response) {
                let data = await fetch(`https://snake-eyes.herokuapp.com/autocomplete?query=${request.term}`)
                    .then(results => results.json())
                    .then(results => results.map(result => {
                        return { label: result.name, value: result.name, id: result._id };
                    }));
                response(data);
            },
            minLength: 2,
            select: function(event, ui) {
                console.log(ui.item);
            }
                    
        });
    });
    </script>

    
          {% for game in games %}
            
                <div class="row" style="padding: 15px;">
                
                    <div class="card-body">
                      <img src="{{ game[5] }}" width="300" height="200" style="padding: 5px; float: left;"/>
                    </div>
                    <h3 class="card-title" id="game" >{{ game[1] }}</h3>
                   
                    
                    <span>
                      <span style="font-size: large;">Developer: </span>
                      <span style="font-size: larger;">{{game[2] }}</span> 
                    </span>
                    <br>
                    
                    <span>
                      <span style="font-size: large;">Date: </span>
                      <span style="font-size: larger;">{{game[3] }}</span> 
                    </span>
                    <br>
                    <span>
                      <span style="font-size: large;">Top Tags: </span>
                      <span style="font-size: larger;">{{game[4] }}</span> 
                    </span>
                    <br>
                    <span>
                      <span style="font-size: large;">Rating: </span>
                      <span style="font-size: larger;">{{game[8] }}</span> 
                    </span>
                    <br>
                    
                    <form action="/game">
                      <button type="submit" name="recommend" value="{{ game[1] }}">More Like This</button>
                      <button style="float: inline-end;" type="submit" name="details" value="{{ game[1] }}">More Details</button>
                        
                      
                      
                    </form> 
                </div>
                    
                 
            
          {% endfor %}
              
              
  
            
      

  
   
    </div>
  <!-- /.container -->

  



          
          
         
  </div> 
</div>  
{% endblock %}z